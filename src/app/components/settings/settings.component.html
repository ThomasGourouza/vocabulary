<div class="account small-space-bellow flex-container">
  <ng-container
    *ngIf="!!(login$ | async); then signout; else signin"
  ></ng-container>
  <ng-template #signout>
    <p-button
      title="Sign out"
      styleClass="p-button-rounded p-button-danger p-button-raised p-button-outlined"
      icon="pi pi-user"
      (onClick)="onSignout()"
    ></p-button>
    <div class="login d-flex align-items-center">
      {{ login$ | async }}
    </div>
  </ng-template>
  <ng-template #signin>
    <p-button
      title="Sign in"
      styleClass="p-button-rounded p-button-success p-button-raised p-button-outlined"
      icon="pi pi-user"
      (onClick)="onAccount()"
    ></p-button>
  </ng-template>
</div>
<hr />
<div class="d-flex justify-content-between">
  <p-button
    title="Download example file"
    styleClass="p-button-rounded p-button-success p-button-raised p-button-outlined"
    icon="pi pi-download"
    (onClick)="onDownload()"
  ></p-button>
  <div class="flex-container">
    <div class="settings">
      <ng-container
        *ngIf="
          isFileUploadVisible && tabs.length === 0;
          then show_upload;
          else show_trash
        "
      ></ng-container>
      <ng-template #show_upload>
        <p-fileUpload
          styleClass="p-button-rounded p-button-raised p-button-outlined"
          mode="basic"
          [maxFileSize]="5000000"
          chooseIcon="pi-file-excel"
          (onSelect)="onUploadData($event.currentFiles[0])"
          [auto]="true"
        >
        </p-fileUpload>
      </ng-template>
      <ng-template #show_trash>
        <p-button
          title="Remove file"
          styleClass="p-button-rounded p-button-danger p-button-raised p-button-outlined"
          icon="pi pi-trash"
          [disabled]="
            isFileUploadVisible === false || ((isPlaying$ | async) ?? false)
          "
          (onClick)="onReset()"
        ></p-button>
      </ng-template>
    </div>
    <div class="flex-container">
      <select
        class="form-select settings"
        (change)="onChangeTab($event.target)"
        [disabled]="tabs.length === 0 || ((isPlaying$ | async) ?? false)"
      >
        <option
          [value]=""
          [selected]="tabs.length === 0"
          [hidden]="false"
          [disabled]="tabs.length > 0"
        >
          Tab
        </option>
        <option
          *ngFor="let tab of tabs"
          [value]="tab"
          [selected]="tab === selectedTab"
          [label]="tab.toString() | titlecase"
        ></option>
      </select>
      <select
        class="form-select settings"
        (change)="onChangeTag($event.target)"
        [disabled]="tags.length === 0 || ((isPlaying$ | async) ?? false)"
      >
        <option
          [value]="0"
          [selected]="tags.length === 0"
          [hidden]="false"
          [disabled]="tags.length > 0"
        >
          Tag
        </option>
        <option
          *ngFor="let tag of tags"
          [value]="tag"
          [selected]="tag === selectedTag"
          [label]="tag.toString() | titlecase"
        ></option>
      </select>
    </div>
  </div>
  <div class="flex-container">
    <i class="pi pi-volume-up toggle-sound"></i>
    <div class="sound-checkbox">
      <p-checkbox
        title="Automatic speaker"
        [binary]="true"
        [ngModel]="true"
        (onChange)="toggleSound($event.checked)"
      ></p-checkbox>
    </div>
  </div>
</div>
<p-dialog
  header="Account"
  [position]="'top'"
  [(visible)]="isAccountDialogVisible"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
>
  <div class="flex-container">
    <div class="account-form sign-in">
      <span>Sign In</span>
      <form [formGroup]="signinForm" (ngSubmit)="onSignIn()">
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            id="login"
            placeholder="Login"
            formControlName="login"
          />
        </div>
        <div class="form-group">
          <input
            type="password"
            class="form-control"
            id="password"
            placeholder="Password"
            formControlName="password"
          />
        </div>
        <p-button
          title="Sign in"
          class="d-flex justify-content-center"
          styleClass="p-button-rounded p-button-primary p-button-raised"
          icon="pi pi-sign-in"
          type="submit"
          [disabled]="signinForm.invalid"
        ></p-button>
      </form>
    </div>
    <div class="account-form">
      <span>Register</span>
      <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            id="login"
            placeholder="Login"
            formControlName="login"
          />
        </div>
        <div class="form-group">
          <input
            type="password"
            class="form-control"
            id="password"
            placeholder="Password"
            formControlName="password"
          />
        </div>
        <p-button
          title="Register"
          class="d-flex justify-content-center"
          styleClass="p-button-rounded p-button-success p-button-raised"
          icon="pi pi-user-plus"
          type="submit"
          [disabled]="registerForm.invalid"
        ></p-button>
      </form>
    </div>
  </div>
</p-dialog>
